{"version":3,"sources":["entities/candy.enum.ts","entities/coin.enum.ts","utils/index.ts","contexts/work-manager.context.tsx","components/Coin/index.tsx","components/Stats/index.tsx","components/Container/index.tsx","components/Candy/index.tsx","assets/cat-sad.svg","assets/cat.svg","assets/cat-happy.svg","components/SideContainer/index.tsx","App.tsx","index.tsx"],"names":["CandyType","CoinType","CoinsLabel","ONE","TWO","FIVE","CoinsValue","CandiesLabel","A","B","C","CandiesPrice","WorkManagerContext","createContext","WorkManagerProvider","children","useState","amount","setAmount","discount","setDiscount","isDiscountVisible","setIsDiscountVisible","isBuying","setIsBuying","selectedCandy","setSelectedCandy","machineState","setMachineState","machine","setMachine","addCoinToAutomateState","coin","value","resultValue","defaultMachine","push","splice","addCandyToAutomate","candy","useEffect","document","getElementById","classList","remove","add","setTimeout","undefined","Provider","addCoin","totalAmount","buyCandy","Coin","onPress","label","isActive","className","id","disabled","onClick","Stats","useContext","Container","Candy","price","isEnabled","type","SideContainer","src","CatSad","Cat","CatHappy","alt","width","map","el","state","join","App","handleAddCoin","handleBuyCandy","Object","keys","candyPrice","candyType","coinType","ReactDOM","render","StrictMode"],"mappings":"oPAAYA,ECAAC,E,8EDAAD,K,MAAAA,E,MAAAA,E,OAAAA,M,cCAAC,K,UAAAA,E,UAAAA,E,aAAAA,M,KCGL,IAAMC,GAAoC,mBAC9CD,EAASE,IAAM,OAD+B,cAE9CF,EAASG,IAAM,OAF+B,cAG9CH,EAASI,KAAO,OAH8B,GAMpCC,GAAoC,mBAC9CL,EAASE,IAAM,GAD+B,cAE9CF,EAASG,IAAM,GAF+B,cAG9CH,EAASI,KAAO,GAH8B,GAMpCE,GAAuC,mBACjDP,EAAUQ,EAAI,KADmC,cAEjDR,EAAUS,EAAI,KAFmC,cAGjDT,EAAUU,EAAI,KAHmC,GAMvCC,GAAuC,mBACjDX,EAAUQ,EAAI,GADmC,cAEjDR,EAAUS,EAAI,GAFmC,cAGjDT,EAAUU,EAAI,GAHmC,G,OCqBvCE,EAAqBC,wBAChC,IAGWC,EAAsB,SAAC,GAIhB,IAHlBC,EAGiB,EAHjBA,SAGiB,EACWC,mBAAS,GADpB,mBACVC,EADU,KACFC,EADE,OAEeF,mBAAS,GAFxB,mBAEVG,EAFU,KAEAC,EAFA,OAIiCJ,oBAAS,GAJ1C,mBAIVK,EAJU,KAISC,EAJT,OAKeN,oBAAS,GALxB,mBAKVO,EALU,KAKAC,EALA,OAMyBR,qBANzB,mBAMVS,EANU,KAMKC,EANL,OAQuBV,mBAAS,GARhC,mBAQVW,EARU,KAQIC,EARJ,OASaZ,mBAC5B,MAVe,mBASVa,EATU,KASDC,EATC,KAgCXC,EAAyB,SAACC,GAC9B,IAAMC,EAAQ3B,EAAW0B,GAAQf,EAE3BiB,EAAcD,GAhFE,IAgF+CA,EAE/DE,EAAiBN,GAAY,CAAC,IACpCM,EAAeC,KAAK,CAACT,EAAcO,IAE9BL,GACHM,EAAeE,OAAO,EAAG,GAG3BT,EAAgBM,GAChBJ,EAAWK,IAGPG,EAAqB,SAACC,EAAkBpB,GAC5CU,EAASO,KAAK,CAACT,EAAD,UAAkBY,EAAlB,YAA2BpB,KACzCW,EAAWD,GACXD,EAAgB,IAgClB,OA7BAY,qBAAU,WACY,IAAD,IAAff,IACF,UAAAgB,SACGC,eADH,gBAC2BjB,WAD3B,SAEIkB,UAAUC,OAAO,mBACrB,UAAAH,SACGC,eADH,gBAC2BjB,WAD3B,SAEIkB,UAAUE,IAAI,2BAEnB,CAACpB,IAEJe,qBAAU,WACHnB,GAILyB,YAAW,WAAO,IAAD,IACfxB,GAAqB,GACrBE,GAAY,GACZ,UAAAiB,SACGC,eADH,gBAC2BjB,WAD3B,SAEIkB,UAAUC,OAAO,wBACrB,UAAAH,SACGC,eADH,gBAC2BjB,WAD3B,SAEIkB,UAAUE,IAAI,mBAClBnB,OAAiBqB,KAChB,OACF,CAAC1B,EAAmBI,IAGrB,cAACb,EAAmBoC,SAApB,CACEf,MAAO,CACLhB,SACAQ,gBACAN,WACAE,oBACAQ,UACAN,WACAI,eACAsB,QAhFU,SAACjB,GACf,IAAMkB,EAAcjC,EAASX,EAAW0B,GACxCD,EAAuBC,GACvBd,EAAUgC,IA8ENC,SA3EW,SAACZ,GAChBb,EAAiBa,GACjBf,GAAY,GAEZ,IAAM0B,EAAcjC,EAASN,EAAa4B,GAE1CD,EAAmBC,EAAOW,GAE1B9B,EAAY8B,GACZ5B,GAAqB,GACrBJ,EAAU,KAuDV,SAaGH,KChIQqC,G,MANF,SAAC,GAAD,IAAGC,EAAH,EAAGA,QAAgBC,GAAnB,EAAYrB,MAAZ,EAAmBqB,OAAOtB,EAA1B,EAA0BA,KAAMuB,EAAhC,EAAgCA,SAAhC,OACX,wBAAQC,UAAU,OAAOC,GAAE,eAAUzB,GAAQ0B,UAAWH,EAAUI,QAAS,kBAAMN,EAAQrB,IAAzF,SACGsB,MCWUM,G,MArBM,WAAoB,IAAD,EAEpCC,qBAAWjD,GADLK,EAD8B,EAC9BA,OAAQE,EADsB,EACtBA,SAAUE,EADY,EACZA,kBAG1B,OACE,mCACE,sBAAKmC,UAAU,QAAf,UACE,sBAAKA,UAAU,eAAf,UACE,iDADF,IAC8BvC,EAD9B,gBAICI,GACC,sBAAKmC,UAAU,iBAAf,UACE,8CADF,IAC2BrC,EAD3B,uBCLK2C,G,MAJU,SAAC,GAA+C,IAA7C/C,EAA4C,EAA5CA,SAC1B,OAAO,qBAAKyC,UAAU,YAAf,SAA4BzC,MCwBtBgD,G,MAnBD,SAAC,GAMiB,IAL9BV,EAK6B,EAL7BA,QAEAW,GAG6B,EAJ7BV,MAI6B,EAH7BU,OACAC,EAE6B,EAF7BA,UACAC,EAC6B,EAD7BA,KAEA,OACE,yBACET,GAAE,gBAAWS,GACbV,UAAU,0CACVE,UAAWO,EACXN,QAAS,kBAAMN,EAAQa,IAJzB,UAMGF,EANH,UCtBW,MAA0B,oCCA1B,MAA0B,gCCA1B,MAA0B,sCCyD1BG,G,MA5Cc,SAAC,GAEU,IADtCpD,EACqC,EADrCA,SACqC,EACK8C,qBAAWjD,GAA7CK,EAD6B,EAC7BA,OAAQU,EADqB,EACrBA,aAAcE,EADO,EACPA,QAc9B,OACE,sBAAK2B,UAAU,iBAAf,UACGzC,EACD,qBAAKyC,UAAU,WAAf,SACE,qBAAKY,IAfLnD,GAAU,EACLoD,EAGLpD,GAAU,EACLqD,EAGFC,EAOyBC,IAAI,MAAMC,MAAM,WAE9C,sBAAKjB,UAAU,eAAf,UACE,sBAAKA,UAAU,aAAf,sBAAsC7B,GAAgB,OACtD,sBAAK6B,UAAU,mBAAf,8BACc,IACX3B,IAAO,OACNA,QADM,IACNA,OADM,EACNA,EACI6C,KAAI,SAACC,GAAQ,IAAD,cACWA,EADX,GACLC,EADK,KACE3C,EADF,KAGNC,EACa,kBAAVD,EAAqBA,EAA5B,WAAwCA,GAE1C,MAAM,IAAN,OAAW2C,EAAX,eAAuB1C,MAExB2C,KAAK,mBCmCLC,MAvEf,WAAgB,IAAD,EAC4CjB,qBAAWjD,GAA5DqC,EADK,EACLA,QAASE,EADJ,EACIA,SAAUlC,EADd,EACcA,OAAQI,EADtB,EACsBA,kBAE7B0D,EAAgB,SAAC/C,GACrBiB,EAAQjB,IAGJgD,EAAiB,SAACzC,GACtBY,EAASZ,IA2CX,OACE,sBAAKiB,UAAU,kBAAf,UACE,cAAC,EAAD,UACE,qCACE,qBAAKA,UAAU,kBAAf,4BACA,qBAAKA,UAAU,oBAAf,SAvBCyB,OAAOC,KAAKlF,GAAW0E,KAAI,SAACnC,GACjC,IANiB4C,EAMXC,EAAY7C,EAEZyB,EAAQrD,EAAayE,GAE3B,OACE,cAAC,EAAD,CAEE/B,QAAS2B,EACThB,MAAOA,EACPE,KAAMkB,EACN9B,MAAO/C,EAAa6E,GACpBnB,WAjBakB,EAiBUnB,EAhBtB/C,GAAUkE,IAWN5C,QAiBL,qBAAKiB,UAAU,oBAAf,SA7CCyB,OAAOC,KAAKjF,GAAUyE,KAAI,SAAC1C,GAChC,IAAMqD,EAAWrD,EAEjB,OACE,cAAC,EAAD,CAEEuB,UAAWlC,EACXW,KAAMqD,EACNhC,QAAS0B,EACT9C,MAAO3B,EAAW+E,GAClB/B,MAAOpD,EAAWmF,IALbrD,aA2CT,cAAC,EAAD,UACE,mCACE,qBAAKwB,UAAU,kBAAf,SACE,cAAC,EAAD,cCvEZ8B,IAASC,OACP,cAAC,IAAMC,WAAP,UACE,cAAC,EAAD,UACE,cAAC,EAAD,QAGJ/C,SAASC,eAAe,W","file":"static/js/main.280a3554.chunk.js","sourcesContent":["export enum CandyType {\n  A = 'A', \n  B = 'B', \n  C = 'C', \n}","export enum CoinType {\n  ONE = 'ONE',\n  TWO = 'TWO',\n  FIVE = 'FIVE',\n}\n","import { CandyType } from \"../entities/candy.enum\";\nimport { CoinType } from \"../entities/coin.enum\";\n\nexport const CoinsLabel: Record<CoinType, string> = {\n  [CoinType.ONE]: \"CC1\",\n  [CoinType.TWO]: \"CC2\",\n  [CoinType.FIVE]: \"CC5\",\n};\n\nexport const CoinsValue: Record<CoinType, number> = {\n  [CoinType.ONE]: 1,\n  [CoinType.TWO]: 2,\n  [CoinType.FIVE]: 5,\n};\n\nexport const CandiesLabel: Record<CandyType, string> = {\n  [CandyType.A]: \"A\",\n  [CandyType.B]: \"B\",\n  [CandyType.C]: \"C\",\n};\n\nexport const CandiesPrice: Record<CandyType, number> = {\n  [CandyType.A]: 6,\n  [CandyType.B]: 7,\n  [CandyType.C]: 8,\n};\n","import React, { createContext, useEffect, useState } from \"react\";\nimport { CandyType } from \"../entities/candy.enum\";\nimport { CoinType } from \"../entities/coin.enum\";\nimport { CandiesPrice, CoinsValue } from \"../utils\";\n\nconst MACHINE_MAX_VALUE = 9;\n\n// const STATES = [\n//   [1, 2, 5, null, null, null],\n//   [2, 3, 6, ]\n// ]\n\n// const STATES: Record<string, string | number> = {\n//   '0,1': 1,\n//   '0,2': 2,\n//   '0,5': 5,\n//   '0,A': 0,\n//   '0,B': 0,\n//   '0,C': 0,\n\n//   '1,1': 2,\n//   '1,2': 3,\n//   '1, 5': 6,\n//   '1, A': 1,\n//   '1, B': 1,\n//   '1, C': 1,\n\n//   '2, 1': 3,\n//   '':\n// }\ninterface WorkManagerContextProps {\n  amount: number;\n  discount: number;\n  isDiscountVisible: boolean;\n  isBuying: boolean;\n  selectedCandy?: CandyType;\n  machine: [[number, number | string]] | null;\n  machineState: number;\n  addCoin(coin: CoinType): void;\n  buyCandy(candy: CandyType): void;\n}\n\nexport const WorkManagerContext = createContext<WorkManagerContextProps>(\n  {} as WorkManagerContextProps\n);\n\nexport const WorkManagerProvider = ({\n  children,\n}: {\n  children: JSX.Element;\n}): JSX.Element => {\n  const [amount, setAmount] = useState(0);\n  const [discount, setDiscount] = useState(0);\n\n  const [isDiscountVisible, setIsDiscountVisible] = useState(false);\n  const [isBuying, setIsBuying] = useState(false);\n  const [selectedCandy, setSelectedCandy] = useState<CandyType>();\n\n  const [machineState, setMachineState] = useState(0);\n  const [machine, setMachine] = useState<[[number, number | string]] | null>(\n    null\n  );\n\n  const addCoin = (coin: CoinType) => {\n    const totalAmount = amount + CoinsValue[coin];\n    addCoinToAutomateState(coin);\n    setAmount(totalAmount);\n  };\n\n  const buyCandy = (candy: CandyType) => {\n    setSelectedCandy(candy);\n    setIsBuying(true);\n\n    const totalAmount = amount - CandiesPrice[candy];\n\n    addCandyToAutomate(candy, totalAmount);\n\n    setDiscount(totalAmount);\n    setIsDiscountVisible(true);\n    setAmount(0);\n  };\n\n  const addCoinToAutomateState = (coin: CoinType) => {\n    const value = CoinsValue[coin] + amount;\n\n    const resultValue = value >= MACHINE_MAX_VALUE ? MACHINE_MAX_VALUE : value;\n\n    const defaultMachine = machine || ([[]] as unknown as [[number, number]]);\n    defaultMachine.push([machineState, resultValue]);\n\n    if (!machine) {\n      defaultMachine.splice(0, 1);\n    }\n\n    setMachineState(resultValue);\n    setMachine(defaultMachine);\n  };\n\n  const addCandyToAutomate = (candy: CandyType, discount: number) => {\n    machine!.push([machineState, `${candy}-${discount}`]);\n    setMachine(machine);\n    setMachineState(0);\n  };\n\n  useEffect(() => {\n    if (selectedCandy) {\n      document\n        .getElementById(`candy-${selectedCandy}`)\n        ?.classList.remove(\"animate__fadeIn\");\n      document\n        .getElementById(`candy-${selectedCandy}`)\n        ?.classList.add(\"animate__fadeOutDown\");\n    }\n  }, [selectedCandy]);\n\n  useEffect(() => {\n    if (!isDiscountVisible) {\n      return;\n    }\n\n    setTimeout(() => {\n      setIsDiscountVisible(false);\n      setIsBuying(false);\n      document\n        .getElementById(`candy-${selectedCandy}`)\n        ?.classList.remove(\"animate__fadeOutDown\");\n      document\n        .getElementById(`candy-${selectedCandy}`)\n        ?.classList.add(\"animate__fadeIn\");\n      setSelectedCandy(undefined);\n    }, 3000);\n  }, [isDiscountVisible, selectedCandy]);\n\n  return (\n    <WorkManagerContext.Provider\n      value={{\n        amount,\n        selectedCandy,\n        discount,\n        isDiscountVisible,\n        machine,\n        isBuying,\n        machineState,\n        addCoin,\n        buyCandy,\n      }}\n    >\n      {children}\n    </WorkManagerContext.Provider>\n  );\n};\n","import React from \"react\";\nimport { CoinType } from \"../../entities/coin.enum\";\n\nimport \"./style.css\";\n\ninterface CoinProps {\n  onPress: (value: CoinType) => void;\n  value: number;\n  label: string;\n  coin: CoinType;\n  isActive: boolean;\n}\n\nconst Coin = ({ onPress, value, label, coin, isActive }: CoinProps): JSX.Element => (\n  <button className=\"coin\" id={`coin-${coin}`} disabled={!isActive} onClick={() => onPress(coin)}>\n    {label}\n  </button>\n);\n\nexport default Coin;\n","import React, { useContext } from \"react\";\nimport { WorkManagerContext } from \"../../contexts/work-manager.context\";\n\nimport \"./style.css\";\n\nexport const Stats = (): JSX.Element => {\n  const { amount, discount, isDiscountVisible } =\n    useContext(WorkManagerContext);\n\n  return (\n    <>\n      <div className=\"stats\">\n        <div className=\"stats-amount\">\n          <span>Seu dinheiro:</span> {amount} CAT COINS\n        </div>\n\n        {isDiscountVisible && (\n          <div className=\"stats-discount\">\n            <span>Seu troco:</span> {discount} CAT COINS\n          </div>\n        )}\n      </div>\n    </>\n  );\n};\n\nexport default Stats;\n","import React from \"react\";\n\nimport \"./style.css\";\n\ninterface ContainerProps {\n  children: JSX.Element;\n}\n\nexport const Container = ({ children }: ContainerProps): JSX.Element => {\n  return <div className=\"container\">{children}</div>;\n};\n\nexport default Container;","import React from \"react\";\n\nimport { CandyType } from \"../../entities/candy.enum\";\n\nimport \"./style.css\";\n\ninterface CandyProps {\n  onPress: (candy: CandyType) => void;\n  label: string;\n  price: number;\n  isEnabled: boolean;\n  type: CandyType;\n}\n\nconst Candy = ({\n  onPress,\n  label,\n  price,\n  isEnabled,\n  type,\n}: CandyProps): JSX.Element => {\n  return (\n    <button\n      id={`candy-${type}`}\n      className=\"candy animate__animated animate__fadeIn\"\n      disabled={!isEnabled}\n      onClick={() => onPress(type)}\n    >\n      {price}CC\n    </button>\n  );\n};\n\nexport default Candy;\n","export default __webpack_public_path__ + \"static/media/cat-sad.8b84d25a.svg\";","export default __webpack_public_path__ + \"static/media/cat.837b022f.svg\";","export default __webpack_public_path__ + \"static/media/cat-happy.4f7002c1.svg\";","import React, { useContext } from \"react\";\nimport { WorkManagerContext } from \"../../contexts/work-manager.context\";\n\nimport CatSad from \"../../assets/cat-sad.svg\";\nimport Cat from \"../../assets/cat.svg\";\nimport CatHappy from \"../../assets/cat-happy.svg\";\n\nimport \"./style.css\";\n\ninterface SideContainerProps {\n  children: JSX.Element;\n}\n\nexport const SideContainer = ({\n  children,\n}: SideContainerProps): JSX.Element => {\n  const { amount, machineState, machine } = useContext(WorkManagerContext);\n\n  const getCatToRender = () => {\n    if (amount <= 5) {\n      return CatSad;\n    }\n\n    if (amount <= 7) {\n      return Cat;\n    }\n\n    return CatHappy;\n  };\n\n  return (\n    <div className=\"side-container\">\n      {children}\n      <div className=\"side-cat\">\n        <img src={getCatToRender()} alt=\"Cat\" width=\"100%\" />\n      </div>\n      <div className=\"side-machine\">\n        <div className=\"side-state\">Estado: q{machineState || \"0\"}</div>\n        <div className=\"side-transitions\">\n          Transições:{\" \"}\n          {machine &&\n            machine\n              ?.map((el) => {\n                const [state, value] = el;\n\n                const resultValue =\n                  typeof value === \"string\" ? value : `q${value}`;\n\n                return `q${state} => ${resultValue}`;\n              })\n              .join(\" | \")}\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default SideContainer;\n","import React, { useContext } from \"react\";\nimport \"./App.css\";\nimport { WorkManagerContext } from \"./contexts/work-manager.context\";\n\n// Components\nimport Coin from \"./components/Coin\";\nimport Stats from \"./components/Stats\";\nimport Container from \"./components/Container\";\nimport Candy from \"./components/Candy\";\nimport { CoinType } from \"./entities/coin.enum\";\nimport { CandiesLabel, CandiesPrice, CoinsLabel, CoinsValue } from \"./utils\";\nimport { CandyType } from \"./entities/candy.enum\";\nimport SideContainer from \"./components/SideContainer\";\n\nfunction App() {\n  const { addCoin, buyCandy, amount, isDiscountVisible } = useContext(WorkManagerContext);\n\n  const handleAddCoin = (coin: CoinType) => {\n    addCoin(coin);\n  };\n\n  const handleBuyCandy = (candy: CandyType) => {\n    buyCandy(candy);\n  };\n\n  const renderCoins = (): JSX.Element[] => {\n    return Object.keys(CoinType).map((coin: string) => {\n      const coinType = coin as CoinType;\n\n      return (\n        <Coin\n          key={coin}\n          isActive={!isDiscountVisible}\n          coin={coinType}\n          onPress={handleAddCoin}\n          value={CoinsValue[coinType]}\n          label={CoinsLabel[coinType]}\n        />\n      );\n    });\n  };\n\n  const canBuyCandy = (candyPrice: number): boolean => {\n    return amount >= candyPrice;\n  };\n\n  const renderCandies = (): JSX.Element[] => {\n    return Object.keys(CandyType).map((candy: string) => {\n      const candyType = candy as CandyType;\n\n      const price = CandiesPrice[candyType];\n\n      return (\n        <Candy\n          key={candy}\n          onPress={handleBuyCandy}\n          price={price}\n          type={candyType}\n          label={CandiesLabel[candyType]}\n          isEnabled={canBuyCandy(price)}\n        />\n      );\n    });\n  };\n\n  return (\n    <div className=\"container-outer\">\n      <Container>\n        <>\n          <div className=\"container-title\">CatCoinMachine</div>\n          <div className=\"candies-container\">{renderCandies()}</div>\n          <div className=\"buttons-container\">{renderCoins()}</div>\n        </>\n      </Container>\n      <SideContainer>\n        <>\n          <div className=\"stats-container\">\n            <Stats />\n          </div>\n        </>\n      </SideContainer>\n    </div>\n  );\n}\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./App\";\nimport { WorkManagerProvider } from \"./contexts/work-manager.context\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <WorkManagerProvider>\n      <App />\n    </WorkManagerProvider>\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n"],"sourceRoot":""}